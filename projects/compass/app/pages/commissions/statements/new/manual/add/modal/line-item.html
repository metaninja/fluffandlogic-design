<div class="modal fade" id="line-item-modal" tabindex="-1" role="dialog" aria-labelledby="line-item-title" style="overflow: scroll;">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header clearfix">
                <h5 class="modal-title" id="line-item-title">Add/Edit Line Item</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <i class="linearicon-cross2" aria-hidden="true"></i>
                </button>
            </div>

            <div class="modal-body" style="overflow-y: unset">
                <!-- Add Commission Line Item -->
                <div class="js-modal-body-edit-line-item">
                    <ul class="tabs">
                        <li class="tab"><a class="tab-link active" href="javascript:void(0);" onclick="showTab(this, '.js-edit-line-item')">Add Line Item</a></li>
                        <li class="tab"><a class="tab-link" href="javascript:void(0);" onclick="showTab(this, '.js-payout')">Payout</a></li>
                    </ul>

                    <!-- Add Line Item -->
                    <div class="js-tab js-edit-line-item">

                        <div class="row">
                            <div class="col-md-6">

                                <div class="form-group">
                                    <label>Policy # <em class="text-muted-light">Hint: Type PL1234 for policy found.</em></label>
                                    <input type="text" class="form-control js-policy-empty-policy-number" onblur="searchExistingPolicy(this)">
                                    <div class="progress-bar-inline js-policy-searching-progress-bar"><div class="progress-bar-indeterminate"></div></div>
                                    <div class="form-validation-message text-info js-policy-searching hide-content"><em>Searching for policy</em></div>
                                    <div class="form-validation-message text-success js-policy-found hide-content"><em>Policy found <i class="linearicon-checkmark-circle ml-1"></i></em></div>
                                    <div class="form-validation-message text-danger js-policy-not-found hide-content"><em><i class="linearicon-warning mr-1"></i> Policy not found.</em></div>
                                </div>

                                <div class="form-group">
                                    <label>Insured</label>
                                    <input type="text" class="form-control js-policy-empty-insured">
                                </div>

                                <div class="form-group">
                                    <label>LOB</label>
                                    <div class="type-ahead js-policy-empty-lob">
                                        <div class="input-group type-ahead-input-group">
                                            <input type="text" class="form-control type-ahead-input" placeholder="Search LOB" aria-label="Search"
                                                   onkeyup="typeAheadSearch.call(this)">
                                            <span class="input-group-addon" id="basic-addon-search-policy"><i class="linearicon-magnifier"></i></span>
                                        </div>

                                        <div class="type-ahead-results">
                                            <a href="javascript:void(0);" class="type-ahead-result" onclick="typeAheadSearchResult.call(this)">AUTO (Commercial)</a>
                                            <a href="javascript:void(0);" class="type-ahead-result" onclick="typeAheadSearchResult.call(this)">AUTO (Personal)</a>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label>Transaction Type</label>
                                    <div class="type-ahead js-policy-empty-lob">
                                        <div class="input-group type-ahead-input-group">
                                            <input type="text" class="form-control type-ahead-input" placeholder="Search Transaction Type" aria-label="Search"
                                                   onkeyup="typeAheadSearch.call(this)">
                                            <span class="input-group-addon" id="basic-addon-trans-type"><i class="linearicon-magnifier"></i></span>
                                        </div>

                                        <div class="type-ahead-results">
                                            <a href="javascript:void(0);" class="type-ahead-result" onclick="typeAheadSearchResult.call(this)">New Business (NBS)</a>
                                            <a href="javascript:void(0);" class="type-ahead-result" onclick="typeAheadSearchResult.call(this)">Renewal (RWL)</a>
                                            <a href="javascript:void(0);" class="type-ahead-result" onclick="typeAheadSearchResult.call(this)">Change (PCH)</a>
                                            <a href="javascript:void(0);" class="type-ahead-result" onclick="typeAheadSearchResult.call(this)">Cancellation (XLC)</a>
                                        </div>
                                    </div>
                                </div>


                                <div class="form-group">
                                    <label>Transaction Type</label>
                                    <input type="text" class="form-control js-policy-empty-transaction-type">
                                </div>

                                <div class="form-group">
                                    <label>Transaction Date</label>
                                    <div class="input-group">
                                        <input type="input" class="form-control js-policy-empty-transaction-date" aria-label="Transaction Date">
                                        <div class="input-group-append">
                                <span class="input-group-text">
                                    <i class="linearicon-calendar-full"></i>
                                </span>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="col-md-1"></div>
                            <div class="col-md-5">
                                <div class="form-group">
                                    <label>Premium</label>
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">$</span>
                                        </div>
                                        <input type="text" class="form-control text-right js-policy-empty-premium" aria-label="Premium">
                                    </div>
                                </div>

                                <!--
                                <div class="form-group">
                                    <label>Expected Commission</label>
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">$</span>
                                        </div>
                                        <input type="text" class="form-control text-right js-policy-empty-expected-commission" aria-label="Expected Commission">
                                    </div>
                                </div>
                                -->

                                <div class="form-group">
                                    <label>Commission</label>
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">$</span>
                                        </div>
                                        <input type="text" class="form-control text-right js-policy-empty-actual-commission" aria-label="Actual Commission">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label>Policy Fee</label>
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">$</span>
                                        </div>
                                        <input type="text" class="form-control text-right js-policy-empty-policy-fee" aria-label="Policy Fee">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label>Inspection Fee</label>
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">$</span>
                                        </div>
                                        <input type="text" class="form-control text-right js-policy-empty-inspection-fee" aria-label="Inspection Fee">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label>Agency Fee</label>
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">$</span>
                                        </div>
                                        <input type="text" class="form-control text-right js-policy-empty-agency-fee" aria-label="Agency Fee">
                                    </div>
                                </div>

                            </div>

                        </div>

                    </div>
                    <!-- Add Line Item -->

                    <div class="js-tab js-payout" style="display: none;">

                        <!-- Carrier Rule Summary -->
                        <div class="alert alert-success js-rule-collapsed">
                            <i class="linearicon-checkmark-circle linearicon-lg mr-2"></i>
                            <span class="mr-2">Matches Rule: "Pay Agency 15% of  Earned Premium for New Business"</span>
                            <a href="javascript:void(0)" class="js-btn-expand-rule">Show Details</a>
                        </div>

                        <div class="alert alert-success js-rule-expanded">
                            <div>
                                <p>
                                    <select class="form-control">
                                        <option>Matches Rule: "Pay Agency 15% of  Earned Premium for New Business"</option>
                                    </select>
                                </p>
                                <p>
                                    If New/Renewal is New<br>
                                    and Transaction is New Business or Policy Change or Rewrite<br>
                                    and State is one of AZ, AL, KY, TX<br>
                                    Pay My Agency 80% of My Agency Commission<br>
                                    Pay My Agency 100% of Inspection Fees<br>
                                    Pay My Agency 50% of Policy Fees<br>
                                </p>

                                <a href="javascript:void(0)" class="js-btn-collapse-rule">Hide Details</a>
                            </div>
                        </div>
                        <br class="clearfix">
                        <div class="alert alert-warning hide-content js-alert-overriding-commission-rule">
                            <i class="linearicon-warning linearicon-lg mr-2"></i>
                            <span class="mr-2">Overriding commission rule</span>

                            <a href="javascript:void(0)" class="js-cancel-override">Cancel Override</a>
                        </div>
                        <!-- Carrier Rule Summary -->

                        <!-- Payees section -->
                        <table class="table table-hover table-more-info js-payees-list">
                            <thead>
                            <tr>
                                <th>Pay</th>
                                <th>Commission</th>
                                <th>Policy Fees</th>
                                <th>Inspection Fees</th>
                                <th>Agency Fees</th>
                                <th></th>
                            </tr>
                            </thead>
                            <tbody id="payouts">
                            </tbody>

                            <tbody>
                            <tr class="payout-row">
                                <td class="payout-recipient">
                                    <strong>My Agency</strong>
                                </td>
                                <td class="js-payout-commission">
                            <span class="d-flex align-items-center">
                                <input type="text" class="form-control payout-split-value" style="width: 70px" value="" disabled>
                                <select type="text" class="form-control payout-split-value-type" onchange="renderPayouts()" disabled>
                                    <option value="%">%</option>
                                    <option value="$">$</option>
                                </select>
                            </span>
                                    <div class="payout-split-dollars">=$1,200</div>
                                </td>
                                <td class="js-payout-policy-fee">
                            <span class="d-flex align-items-center">
                                <input type="text" class="form-control payout-split-value" style="width: 70px" value="" disabled>
                                <select type="text" class="form-control payout-split-value-type" onchange="renderPayouts()" disabled>
                                    <option value="%">%</option>
                                    <option value="$">$</option>
                                </select>
                            </span>
                                    <div class="payout-split-dollars">=$50</div>
                                </td>
                                <td class="js-payout-inspection-fee">
                            <span class="d-flex align-items-center">
                                <input type="text" class="form-control payout-split-value" style="width: 70px" value="" disabled>
                                <select type="text" class="form-control payout-split-value-type" onchange="renderPayouts()" disabled>
                                    <option value="%">%</option>
                                    <option value="$">$</option>
                                </select>
                            </span>
                                    <div class="payout-split-dollars">=$165</div>
                                </td>
                                <td class="js-payout-agency-fee">
                            <span class="d-flex align-items-center">
                                <input type="text" class="form-control payout-split-value" style="width: 70px" value="" disabled>
                                <select type="text" class="form-control payout-split-value-type" onchange="renderPayouts()" disabled>
                                    <option value="%">%</option>
                                    <option value="$">$</option>
                                </select>
                            </span>
                                    <div class="payout-split-dollars">=$100</div>
                                </td>
                                <td class="payout-actions">
                                    <div class="js-btn-group-edit">
                                        <a href="javascript:void(0)" class="text-success mr-2" onclick="editPayout(this)"><i class="linearicon-pencil linearicon-lg"></i></a>
                                    </div>
                                    <div class="js-btn-group-save hide-content">
                                        <a href="javascript:void(0)" class="text-success mr-2" onclick="savePayout(this)"><i class="linearicon-checkmark-circle linearicon-lg"></i></a>
                                        <a href="javascript:void(0)" class="text-danger" onclick="cancelPayout(this)"><i class="linearicon-cross-circle linearicon-lg"></i></a>
                                    </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>


                    </div>
                </div>
                <!-- Add Commission Line Item -->

                <!-- Add New Policy -->
                <div class="js-modal-body-add-policy" style="display: none;">

                    <div class="row">
                        <div class="col-md-5">
                            <h3 class="h3">Policy Info</h3>

                            <div class="form-group">
                                <label class="required">Member Agency</label>
                                <select class="form-control policy-transaction-type policy-member-agency" required>
                                    <option>-- Select --</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="required">Line of Business</label>
                                <select class="form-control policy-lob" required>
                                    <option>-- Select --</option>
                                    <option>Abusive Acts Liability</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="required">Transaction Type</label>
                                <select class="form-control policy-transaction-type" required>
                                    <option>-- Select --</option>
                                    <option>New Business</option>
                                    <option>Policy Change</option>
                                    <option>Reinstate</option>
                                    <option>Rewrite</option>
                                    <option>Renewal</option>
                                    <option>Cancel Conf</option>
                                </select>
                            </div>

                            <div class="alert alert-warning">
                                Please enter policy # exactly as it appears on the policy on the carrier's site.
                                A duplicate policy could be created if entered incorrectly.
                            </div>

                            <div class="form-group">
                                <label class="required">Policy #</label>
                                <input type="text" class="form-control" required>
                            </div>

                            <div class="form-group">
                                <label for="effective-date" class="required">Effective Date</label>
                                <div class="input-group">
                                    <input type="date" class="form-control" id="effective-date" aria-label="Effective Date" required>
                                    <div class="input-group-append">
                                        <span class="input-group-text">
                                            <i class="linearicon-calendar-full"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="expiration-date" class="required">Expiration Date</label>
                                <div class="input-group">
                                    <input type="date" class="form-control" id="expiration-date" aria-label="Expiration Date" required>
                                    <div class="input-group-append">
                                        <span class="input-group-text">
                                            <i class="linearicon-calendar-full"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="master-company" class="required">Carrier</label>
                                <select class="form-control policy-carrier" id="master-company" required>
                                    <option>-- Select --</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="writing-company" class="required">Writing Company</label>
                                <select class="form-control" id="writing-company" required>
                                    <option>-- Select --</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="rating-state" class="required">Rating State</label>
                                <select class="form-control" id="rating-state" required>
                                    <option>TX</option>
                                </select>
                            </div>

                            <!--<div class="form-group">-->
                                <!--<label for="lob-orig-date" class="required">LOB Origination Date</label>-->
                                <!--<div class="input-group">-->
                                    <!--<input type="date" class="form-control" id="lob-orig-date" aria-label="Expiration Date" required>-->
                                    <!--<div class="input-group-append">-->
                                        <!--<span class="input-group-text">-->
                                            <!--<i class="linearicon-calendar-full"></i>-->
                                        <!--</span>-->
                                    <!--</div>-->
                                <!--</div>-->
                            <!--</div>-->

                            <div class="form-group">
                                <label for="original-producer-code" class="required">Producer Code</label>
                                <input type="text" class="form-control" id="original-producer-code" required>
                            </div>

                            <!--<div class="form-group">-->
                                <!--<label for="producer-code-override" class="required">Producer Code Override</label>-->
                                <!--<input type="text" class="form-control" id="producer-code-override" required>-->
                            <!--</div>-->

                            <div class="form-group">
                                <label for="agency-code" class="required">Agency Code</label>
                                <input type="text" class="form-control" id="agency-code" required>
                            </div>


                        </div>
                        <div class="col-md-7">
                            <h3 class="h3">Premium & Additional Charges</h3>

                            <div class="row">
                                <div class="col">
                                    <div class="form-group">
                                        <label for="policy-written-premium" class="required">Written Premium</label>
                                        <input type="text" class="form-control" id="policy-written-premium" required>
                                    </div>

                                    <div class="form-group">
                                        <label for="policy-written-premium">Estimated Fees</label>
                                        <input type="text" class="form-control" id="policy-written-premium">
                                    </div>

                                    <div class="form-group">
                                        <label for="policy-estimated-taxes">Estimated Taxes</label>
                                        <input type="text" class="form-control" id="policy-estimated-taxes">
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="form-group">
                                        <label for="policy-full-term-premium" class="required">Full-Term Premium</label>
                                        <input type="text" class="form-control" id="policy-full-term-premium" required>
                                    </div>

                                    <div class="form-group">
                                        <label for="policy-annual-premium" class="required">Annual Premium</label>
                                        <input type="text" class="form-control" id="policy-annual-premium" required>
                                    </div>

                                    <div class="form-group">
                                        <label for="policy-total-commission">Total Commission</label>
                                        <div class="d-flex flex-no-wrap">
                                            <input type="text" class="form-control mr-2" id="policy-total-commission">
                                            <select class="form-control" style="width: 4rem;">
                                                <option selected>%</option>
                                                <option>$</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>
                <!-- Add New Policy -->
            </div>

            <div class="modal-footer">
                <div class="modal-footer-left">
                    <label for="checkbox-create-new-policy" class="js-btn-create-new-policy hide-content">
                        Create new policy
                    </label>

                    <label class="switch ml-2 js-btn-create-new-policy hide-content">
                        <input type="checkbox" id="checkbox-create-new-policy" onclick="EnableSaveAndAddPolicy(this)">
                        <div class="slider round">
                            <span class="on">YES</span>
                            <span class="off">NO</span>
                        </div>
                    </label>
                </div>
                <div class="modal-footer-right">
                    <button class="btn btn-outline-primary" data-dismiss="modal">Cancel</button>
                    <button class="btn btn-success js-btn-save-add-another ml-2" onclick="saveAndAddAnother()">Save + Add Another</button>
                    <button class="btn btn-primary ml-2 js-btn-save-line-item hide-content" onclick="saveLineItem(false); $('#line-item-modal').modal('hide');">Save</button>
                    <button class="btn btn-primary ml-2 js-btn-save-existing-line-item" onclick="saveLineItem(true); $('#line-item-modal').modal('hide');">Save</button>
                    <button class="btn btn-primary ml-2 js-btn-save-and-add-policy hide-content" onclick="saveLineItem(true);">Save</button>
                    <button class="btn btn-primary ml-2 js-btn-save-policy hide-content" onclick="addPolicy();">Add Policy</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="bff-script" data-src="app/pages/commissions/statements/new/manual/add/modal/line-item.js"></div>
<div class="bff-script" data-src="app/shared/required-fields.js"></div>
