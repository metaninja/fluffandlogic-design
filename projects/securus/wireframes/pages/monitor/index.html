<title>Monitor Activity</title>

<!-- begin: Page Heading -->
<div class="container-fluid page-header">
    <div class="pull-left">
        <div class="page-header-icon">
            <span class="fa fa-bar-chart-o fa-2x"></span>
        </div>
        <h2>Monitor Activity</h2>
    </div>
</div>
<!-- end: Page Heading -->
<div class="container-fluid no-breadcrumb">
    <div class="row">
        <div class="col-md-12">
            <div class="breadcrumb live-monitor">
                <h2>
                    Activity at:
                </h2>
                <ul>
                    <li>
                        <i class="fa fa-facility"></i> CI Eden
                    </li>
                    <li>
                        <i class="fa fa-building8"></i>
                        <select class="form-control live-monitor-site">
                            <option>King County Community Correction</option>
                            <option>Collin County Jail</option>
                            <option selected>Frisco City Jail</option>
                        </select>
                    </li>
                    <li>
                        <i class="fa fa-sitemap"></i>
                        <select class="form-control">
                            <option>All Terminal Groups</option>
                            <option>Primary</option>
                            <option>Restricted</option>
                        </select>
                    </li>
                    <li>
                        <i class="fa fa-phone"></i>
                        <select class="form-control">
                            <option>All Terminals</option>
                            <option>Active Terminals</option>
                            <option>HU16-B2-1</option>
                            <option>HU16-B2-2</option>
                            <option>HU16-B2-3</option>
                            <option>HU16-B2-4</option>
                            <option>HU16-B2-5</option>
                            <option>HU16-B2-6</option>
                        </select>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-9">
            <div class="results">
                <!-- Live Monitor tabs -->
                <ul class="nav nav-tabs live-monitor">
                    <li class="active live-calls"><a href="#live-calls" data-toggle="tab"><i class="fa fa-phone fa-lg"></i> Calls</a>
                    </li>
                    <li class="live-videos"><a href="#live-videos" data-toggle="tab"><i class="fa fa-video-camera"></i> Visits</a>
                    </li>
                    <li class="recent-activity"><a href="#recently-ended" data-toggle="tab"><i class="fa fa-history"></i> Recent Activity</a>
                    </li>
                    <li class="todays-visits"><a href="#upcoming" data-toggle="tab"><i class="fa fa-calendar"></i> Upcoming Visits Today</a>
                    </li>
                    <li class="pull-right">
                        <div class="bff-include" data-src="pages/monitor/scan-patrol.html"></div>
                        <div class="multisession-monitor">
                            <button class="btn btn-link" data-toggle="modal" data-target="#multisessionModal">Multisession Monitor &rarr;</button>
                        </div>
                        <div class="view-upcoming-visits">
                            <button class="btn btn-link">View all upcoming visits &rarr;</button>
                        </div>
                    </li>
                </ul>
                <!-- Live Monitor tab panes -->
                <div class="tab-content">
                    <!-- begin: Live Call tab -->
                    <div class="tab-pane active" id="live-calls">
                        <div class="bff-include" data-src="pages/monitor/live-calls.html"></div>
                    </div>
                    <!-- end: Live Call tab -->
                    <!-- begin: Live Videos tab -->
                    <div class="tab-pane" id="live-videos">
                        <div class="bff-include" data-src="pages/monitor/live-visits.html"></div>
                    </div>
                    <!-- end: Live Videos tab -->
                    <!-- begin: Recent Activity -->
                    <div class="tab-pane" id="recently-ended">
                        <div class="bff-include" data-src="pages/monitor/recent-activity.html"></div>
                    </div>
                    <!-- end: Recently Activity -->
                    <!-- begin: Upcoming Visits -->
                    <div class="tab-pane" id="upcoming">
                        <div class="bff-include" data-src="pages/visits/visit-schedule.html"></div>
                    </div>
                    <!-- end: Upcoming Visits -->
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="panel panel-default panel-no-call-selected" style="margin-top: 308.5px; display: none;">
                <div class="panel-body">
                    <p>Select a result to view its call details here.</p>
                </div>
            </div>
            <div class="panel-call-details margin-top-20">
                <div class="panel-body">
                    <ul class="nav nav-tabs call-details-tabs">
                        <li class="active"><a href="#call-details" data-toggle="tab">Details</a></li>
                        <li class="notes-tab"><a href="#call-notes" data-toggle="tab">Notes&nbsp;<span class="badge pull-right">3</span></a></li>
                        <li class="history-tab"><a href="#port-history" data-toggle="tab">History</a></li>
                        <li class="log-tab"><a href="#video-history" data-toggle="tab">Logs&nbsp;<span class="badge pull-right">5</span></a></li>
                    </ul>
                    <div class="tab-content right-panel-style">
                        <!-- begin Call Details -->
                        <div id="call-details" class="tab-pane fade in right-panel-content active">
                            <div class="cdr-call-details">
                                <div class="bff-include" data-src="shared/sidebar/inmate-call-details-lm-right-panel.html"></div>
                                <div class="bff-include" data-src="shared/sidebar/call-to-right-panel.html"></div>
                                <div class="bff-include" data-src="shared/sidebar/additional-call-details-right-panel.html"></div>
                            </div>
                            <div class="vdr-video-details">
                                <div class="bff-include" data-src="shared/sidebar/inmate-video-details-lm-right-panel.html"></div>
                                <div class="bff-include" data-src="shared/sidebar/visitor-details-right-panel.html"></div>
                                <div class="bff-include" data-src="shared/sidebar/visitation-details-right-panel.html"></div>
                                <div class="bff-include" data-src="shared/tags/right-panel-tags.html"></div>
                            </div>
                            <h4 class="section-header">
                                <a data-toggle="collapse" href="#monitor-inmate-activity">
                                    Inmate Activity
                                    <div class="pull-right">
                                        <span class="toggle-hide"></span>
                                        <span class="toggle-show"></span>
                                    </div>
                                </a>
                            </h4>
                            <div class="monitor-chart collapse in" id="monitor-inmate-activity">
                                <div align="center">
                                    <button class="btn btn-primary js-btn-this-party">This Party</button>
                                    <button class="btn btn-link js-btn-all-parties">All Parties</button>
                                </div>
                                <div class="bff-include js-this-party-graph" data-src="shared/sidebar/inmate-activity-graph.html"></div>
                                <div class="bff-include js-all-parties-graph" data-src="shared/sidebar/inmate-activity-graph-all.html"></div>
                                <script type="text/javascript">
                                $('.js-all-parties-graph').hide();

                                $('.js-btn-this-party').click(function() {
                                    $('.js-all-parties-graph').hide();
                                    $('.js-this-party-graph').show();
                                    $('.js-btn-all-parties').removeClass('btn-primary');
                                    $('.js-btn-all-parties').addClass('btn-link');
                                    $('.js-btn-this-party').removeClass('btn-link');
                                    $('.js-btn-this-party').addClass('btn-primary');
                                });
                                $('.js-btn-all-parties').click(function() {
                                    $('.js-this-party-graph').hide();
                                    $('.js-all-parties-graph').show();

                                    $('.js-btn-this-party').removeClass('btn-primary');
                                    $('.js-btn-this-party').addClass('btn-link');
                                    $('.js-btn-all-parties').removeClass('btn-link');
                                    $('.js-btn-all-parties').addClass('btn-primary');

                                    Ngscp.Wireframes.Shared.InmateActivityGraphForAll.refreshChart();
                                });
                                </script>
                            </div>
                        </div>
                        <div id="call-notes" class="tab-pane fade right-panel-content">
                            <div class="bff-include" data-src="shared/notes/btn-add-note.html"></div>
                            <div class="bff-include" data-src="shared/notes/notes.html"></div>
                        </div>
                        <div id="video-history" class="tab-pane fade right-panel-content">
                            <div class="bff-include" data-src="shared/sidebar/visitation-history-panel.html"></div>
                        </div>
                        <div id="port-history" class="tab-pane fade right-panel-content">
                            <table class="table table-condensed">
                                <thead>
                                    <th>Recent Calls</th>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>(212) 496-6321</td>
                                    </tr>
                                    <tr>
                                        <td>(811) 176-9300</td>
                                    </tr>
                                    <tr>
                                        <td>(855) 932-8366</td>
                                    </tr>
                                    <tr>
                                        <td>(833) 673-4551</td>
                                    </tr>
                                    <tr>
                                        <td>(833) 858-1580</td>
                                    </tr>
                                    <tr>
                                        <td>(822) 566-8772</td>
                                    </tr>
                                    <tr>
                                        <td>(822) 145-4111</td>
                                    </tr>
                                    <tr>
                                        <td>(822) 952-4030</td>
                                    </tr>
                                    <tr>
                                        <td>(811) 980-4601</td>
                                    </tr>
                                    <tr>
                                        <td>(855) 781-5532</td>
                                    </tr>
                                </tbody>
                            </table>

                            <a href="#/pages/search/communication/results/index.html">View all calls for this terminal &#8594;</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="bff-include" data-src="include/Player.html"></div>
<div class="bff-include" data-src="include/modal-forward-call.html"></div>
<div class="bff-include" data-src="include/modal-end-forward-call.html"></div>
<div class="bff-include" data-src="include/modal-terminate-call.html"></div>
<div class="bff-include" data-src="include/modal-terminate-video-visit.html"></div>
<div class="bff-include" data-src="include/modal-add-note.html"></div>
<div class="bff-include" data-src="include/modal-edit-note.html"></div>
<div class="bff-include" data-src="include/multisession-monitor-modal.html"></div>
<script>
// Hide History tab for Live Calls only
// $('.nav-tabs.live-monitor li a').click(function(event) {
//     if ($(event.target).parents('li').hasClass('live-calls')) {
//         $('.history-tab').hide();
//     } else {
//         $('.history-tab').show();
//     }
// });

//-- Show / Hide Scan Patrol
$('.multisession-monitor').hide();
$('.view-upcoming-visits').hide();
// $('.history-tab').hide();

$('.live-videos').click(function() {
    $('.scan-patrol').hide();
    $('.view-upcoming-visits').hide();
    $('.multisession-monitor').show();
});

$('.live-calls').click(function() {
    $('.scan-patrol').show();
    $('.view-upcoming-visits').hide();
    $('.multisession-monitor').hide();
});

$('.recent-activity').click(function() {
    $('.scan-patrol').hide();
    $('.view-upcoming-visits').hide();
    $('.multisession-monitor').hide();
});

$('.todays-visits').click(function() {
    $('.scan-patrol').hide();
    $('.view-upcoming-visits').show();
    $('.multisession-monitor').hide();
});

//----------------------------------
//      Highglight Row
//----------------------------------

function highlightRow(thisRow) {
    thisRow.parents('table').find('tr').removeClass('active');
    thisRow.parents('tr').addClass('active');
};

$(document).ready(function() {
    //Highlight user-selected row (e.g. viewing Call Details)
    $('.table-monitor-activity td').click(function() {
        highlightRow($(this));
    });
});

// ----------------------------------------
//           Show Call Details
// ----------------------------------------

$('.vdr-video-details').hide();

$('.table-monitor-activity td').click(function() {
    $('.panel-call-details').slideDown(300);
    $('.cdr-call-details').show();
    $('.vdr-video-details').hide();
    $('.panel-no-call-selected').hide();
});

$('.video-row').click(function() {
    $('.panel-call-details').slideDown(300);
    $('.vdr-video-details').show();
    $('.cdr-call-details').hide();
    $('.panel-no-call-selected').hide();
});


// ----------------------------------------
//          Switch to Notes Tab
// ----------------------------------------
$('.icon-has-note').click(function() {
    $('.call-details-tabs li').removeClass('active');
    $('.notes-tab').addClass('active');
    $(document).scrollTop(0);
    highlightRow($(this));
});
</script>
