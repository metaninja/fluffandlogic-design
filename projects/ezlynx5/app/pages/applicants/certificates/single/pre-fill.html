
<div class="form-group">
    <label class="required">ACORD form</label>

    <select class="form-control" id="acord-forms" onchange="updateCertificateName(this)">
        <option value="acord30">Certificate of Garage Insurance &mdash; ACORD 30</option>
        <option value="acord25">Certificate of Liability Insurance &mdash; ACORD 25</option>
        <option value="acord24">Certificate of Property Insurance &mdash; ACORD 24</option>
        <option value="acord28">Evidence of Commercial Property Insurance &mdash; ACORD 28</option>
        <option value="acord29">Evidence of Flood Insurance &mdash; ACORD 29</option>
        <option value="acord75">Insurance Binder &mdash; ACORD 75</option>
        <option value="acord23">Vehicle Or Equipment Certificate of Insurance &mdash; ACORD 23</option>
    </select>
</div>

<div class="form-group">
    <label class="required">Certificate Name</label>
    <input type="text" class="form-control js-certificate-name" value="ACORD 23 Vehicle Or Equipment Certificate of Insurance Certificate" onkeyup="updateTitle(this)">
</div>


<h3 class="h3">Policies</h3>
<a href="javascript:void(0)" class="btn btn-success js-policies hide-content" data-toggle="modal" data-target="#add-policies-modal">
    Add Policy
    <i class="linearicon-plus ml-2"></i>
</a>


<div class="js-no-policies">
    <a href="javascript:void(0)" class="btn btn-success" data-toggle="modal" data-target="#add-policies-modal">
        Add Policy
        <i class="linearicon-plus ml-2"></i>
    </a>
</div>

<div class="js-policies hide-content">

    <table class="table table-hover">
        <thead>
        <tr>
            <th>Policy #</th>
            <th>LOB</th>
            <th>Status</th>
            <th>Expires</th>
            <th></th>
        </tr>
        </thead>
        <tbody id="policies-selected">
        </tbody>
    </table>

    <div class="bff-include js-pagination" data-src="app/shared/pagination.html"></div>
</div>

<script id="policies-selected-template" type="x-handlebars-template">
    {{#selectedPolicies}}
    <tr>
        <td>{{policyNumber}}</td>
        <td>{{LOB}}</td>
        <td>{{Status}}</td>
        <td>{{Expires}}</td>
        <td class="text-right"><a href="javascript:void(0)" class="btn btn-link text-danger" onclick="deleteSelectedPolicy({{ @index }})"><i class="linearicon-trash2 linearicon-lg"></i></a></td>
    </tr>
    {{/selectedPolicies}}
</script>

<script>
    function updateTitle(field) {
        $('.js-master-title').html($(field).val());
    }

    function deletePolicy() {
        $('.js-policies').addClass('hide-content');
        $('.js-no-policies').removeClass('hide-content');
    }

    function renderSelectedPolicies() {
        console.log($('body').attr('selectedPolicies'));
        // var selectedPolicies = JSON.parse($('body').attr('selectedPolicies'));

        var selectedPolicies = {
            policies: [
            ]
        };

        if (selectedPolicies) {
            var policiesTemplateScript = $("#policies-template").html();
            var policiesTemplate = Handlebars.compile(policiesTemplateScript);
            var policiesData = policiesTemplate(selectedPolicies);
            $('#policies-selected').html(policiesData);
        }
    }

    renderSelectedPolicies();
</script>


<div class="bff-include" data-src="app/pages/applicants/certificates/edit-certificate/shared/cancel-modal.html"></div>
<div class="bff-include" data-src="app/pages/applicants/certificates/edit-certificate/pre-fill/add-policies-modal.html"></div>
<div class="bff-script" data-src="app/shared/filters/dropdown.js"></div>